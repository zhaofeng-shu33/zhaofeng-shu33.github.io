<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>使用安装脚本安装Texlive</title>
    <link rel="stylesheet" href="../../../css/github-markdown.css">
    <style>
	.markdown-body {
		box-sizing: border-box;
		min-width: 200px;
		max-width: 980px;
		margin: 0 auto;
		padding: 45px;
	}

	@media (max-width: 767px) {
		.markdown-body {
			padding: 15px;
		}
	}
</style>
  </head>
  <article class="markdown-body">
	<h1>使用安装脚本安装Texlive</h1>
<p>2018/12/14</p>
<h1>介绍</h1>
<p>TeX Live 是 TUG (TeX User Group) 维护和发布的 TeX 系统，可说是「官方」的 TeX 系统。网上可找到的教程大多是从镜像安装完整版texlive。镜像发布的周期较长，一些包的版本相对较低，如果希望一开始安装的就是最新版本的包并且需要个性化配置，建议使用官方提供的安装脚本(<code>install-tl</code>)进行安装。</p>
<h1>步骤</h1>
<p>以下以ubuntu 18.04系统为例，展示从安装脚本安装texlive的全过程。注意 texlive 是跨平台的，主要步骤适应于其他操作系统。</p>
<ul>
<li>
<p>首先从官网或其镜像站下载安装脚本。
<code>shell
export REMOTE_INSTALLER_URL=http://mirror.ctan.org/systems/texlive/tlnet
export INSTALL_PACKAGE=install-tl-unx.tar.gz
wget $REMOTE_INSTALLER_URL/$INSTALL_PACKAGE</code>
注意主站 <code>mirror.ctan.org</code> 不是一个真实的镜像，它会重定向到一个镜像站，在国内有时重定向的镜像站比较慢，可直接指向某些镜像站，<strong>建议</strong>设置
<code>export REMOTE_INSTALLER_URL=http://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/tlnet</code>。</p>
</li>
<li>
<p>解压安装脚本并运行。
<code>export INSTALL_DIR=install-texlive
mkdir $INSTALL_DIR
tar -zxvf $INSTALL_PACKAGE -C $INSTALL_DIR --strip-components 1
$INSTALL_DIR/install-tl -repository $REMOTE_INSTALLER_URL -profile tl.profile</code>
<code>install-tl</code> 的默认方式是文字模式的安装，首次启动会从指定的镜像站下载 <code>tlpdb</code> 数据库，数据库目前有11Mb左右，下载完成后出现选项，默认安装 <code>scheme-full</code>，即所有的宏包，目前会占用 5GB以上的硬盘空间，可根据提示进行设置以减少首次安装的容量大小。</p>
</li>
</ul>
<p>这里简要介绍下texlive 安装内容的层级，最顶层的是 <code>scheme</code>，目前有 full, medium, small, basic, minimal 等; 其次是 <code>collection</code>，目前有41个，一个scheme 包含多个 collection; 最小的单元是 <code>package</code>，一个 collection 包含多个 package。这里的 package不仅包括宏包，还有可执行程序等。查看各 scheme 和 collection 具体包含内容和简介可以打开下载的 tlpdb 数据库文件（是一个文本文件）查找相应的字段。</p>
<p>为了减轻交互式配置安装的麻烦以及提供自动化安装的需求， 可指定安装需要的 profile 文件，在profile文件中，可指定scheme, collection, tlpdb 的配置信息以及texlive
安装所需要的环境变量。</p>
<p>texlive 默认配置中是安装到 <code>/usr/local/</code> 下面，需要对该文件夹有写权限，也可更改至用户目录下面。</p>
<ul>
<li>利用 <code>tlmgr</code> 安装新的 <code>package</code>.
使用 <code>tlmgr install pkg</code> 安装新的包，若同时指定若干个包，包名之间用空格隔开。使用一段时间后，有更新包的需求使用<code>tlmgr update pkg</code> 可完成。更多 <code>tlmgr</code> 的用法可参考[2]</li>
</ul>
<h1>参考</h1>
<ol>
<li><a href="https://www.tug.org/texlive/doc/install-tl.html">install-tl 用法说明</a></li>
<li><a href="http://tug.org/texlive/doc/tlmgr.html">tlmgr 用法说明</a></li>
</ol>
  <div style="text-align:center"><a href="https://zhaofeng-shu33.github.io">主页</a></div>
</article>
</html>
